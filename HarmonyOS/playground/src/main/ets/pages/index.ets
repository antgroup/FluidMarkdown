import { NAV, PAGE_BGCOLOR, EPage } from 'ets/pages/shared';
import { EShowMode, BoardComponent } from './board';
import { FeatureListComponent } from './feature-list';
import { FeatureDetailComponent } from './feature-detail';

let markdown = `
<u>ðŸŒ´ **ä¸‰äºšä¸¤æ—¥æ¸¸æ”»ç•¥**</u>

### ðŸ“… è¡Œç¨‹æŽ¨è
**æ–¹æ¡ˆä¸€ï¼šç»å…¸æµ·å²›+æ–‡åŒ–ç»„åˆ**
**Day1ï¼šèœˆæ”¯æ´²å²›+äºšé¾™æ¹¾**
- ä¸Šåˆï¼šèœˆæ”¯æ´²å²›æ½œæ°´/æ‘©æ‰˜è‰‡ï¼ˆå»ºè®®8:30å‰ç™»èˆ¹ï¼‰[^4]
- ä¸‹åˆï¼šäºšé¾™æ¹¾æ²™æ»©æ¼«æ­¥ï¼Œä½“éªŒçŽ»ç’ƒæµ·
- å‚æ™šï¼šæ¤°æ¢¦é•¿å»Šæ‹æ‘„è½æ—¥å‰ªå½±[^1]

**Day2ï¼šå—å±±è§‚éŸ³+å¤©æ¶¯æµ·è§’**
- ä¸Šåˆï¼šå—å±±æ–‡åŒ–æ—…æ¸¸åŒºç¥ˆç¦ï¼Œè§‚108ç±³æµ·ä¸Šè§‚éŸ³[^4]
- ä¸‹åˆï¼šå¤©æ¶¯æµ·è§’æ‰“å¡â€œå¤©æ¶¯çŸ³â€â€œæµ·è§’çŸ³â€[^2]
- æ™šä¸Šï¼šç¬¬ä¸€å¸‚åœºå¤œå¸‚å“å°æµ·é²œ[^1]

---

### ðŸš— äº¤é€šè´´å£«
> 1. **èœˆæ”¯æ´²å²›**éœ€ä¹˜èˆ¹20åˆ†é’Ÿï¼Œå»ºè®®8:30å‰åˆ°è¾¾ç å¤´[^1]ã€‚
> 2. **äºšé¾™æ¹¾è‡³å—å±±**è½¦ç¨‹çº¦40åˆ†é’Ÿï¼Œå¯åŒ…è½¦æˆ–è·Ÿå›¢æŽ¥é€[^3]ã€‚

---

### âš ï¸ æ³¨æ„äº‹é¡¹
- é˜²æ™’å¿…å¤‡ï¼šSPF50+é˜²æ™’éœœ+ç‰©ç†é˜²æ™’è£…å¤‡[^5]ã€‚
- æµ·é²œæ¶ˆè´¹ï¼šé€‰æ‹©æ˜Žç æ ‡ä»·é¤åŽ…ï¼Œç§°é‡å‰ç”©å¹²æ°´åˆ†[^5]ã€‚
- æ°´ä¸Šå®‰å…¨ï¼šæµ®æ½œéœ€ç©¿æ•‘ç”Ÿè¡£ï¼Œè­¦æƒ•ä½Žä»·æ½œæ°´é™·é˜±[^5]ã€‚

---

### ðŸ¦ å¿…åƒç¾Žé£ŸæŽ¨è

| å°åƒ       | æ‹›ç‰Œèœå“        | äººå‡æ¶ˆè´¹ | ä½ç½®å‚è€ƒ      |
|-----------------|-----------------|----------|---------------|
| ç‚’å†°       | æ¦´èŽ²ç‚’å†°       | 36å…ƒ     | å¸‚åŒºåˆ†åº—      |
| æ¸…è¡¥å‡‰èŒ¶     | åæ–™æ¤°å¥¶       | 15å…ƒ     | æ¸”æ‘è·¯        |
| é¦™å‘³æµ·é²œ   | æ¤’ç›çš®çš®è™¾     | 120å…ƒ    | äºšé¾™æ¹¾/æµ·æ£ æ¹¾ |

---

æŸ¥çœ‹æ›´å¤š[é…’åº—æœºç¥¨](url)ä¼˜æƒ å¥—é¤å’Œ[è·Ÿå›¢æ—…æ¸¸](url)æŽ¨èè¡Œç¨‹ã€‚

[^1]: ref1
[^2]: ref2
[^3]: ref3
[^4]: ref4
[^5]: ref5
`;

@Entry
@ComponentV2
export struct Index {
  @Provider(NAV.STACK) stack: NavPathStack = new NavPathStack();

  private content: string = markdown;
  private textAreaController: TextAreaController = new TextAreaController();

  private get actions(): IAction[] {
    return [
      { title: EShowMode.Normal, mode: EShowMode.Normal },
      { title: EShowMode.Typing, mode: EShowMode.Typing },
      { title: EShowMode.Stream, mode: EShowMode.Stream }
    ];
  }

  @Builder
  Action(title: string, mode: EShowMode) {
    Button(title)
      .backgroundColor(0x1890ff)
      .onClick(() => {
        this.stack.pushPath({ name: mode })
      })
  }
  @Builder
  Page(name: string) {
    if (name === EShowMode.Normal) {
      BoardComponent({ content: this.content, mode: EShowMode.Normal })
    } else if (name === EShowMode.Typing) {
      BoardComponent({ content: this.content, mode: EShowMode.Typing })
    } else if (name === EShowMode.Stream) {
      BoardComponent({ content: this.content, mode: EShowMode.Stream })
    } else if (name === EPage.FeatureList) {
      FeatureListComponent()
    } else if (name === EPage.FeatureDetail) {
      FeatureDetailComponent()
    }
  }

  build() {
    Navigation(this.stack) {
      Column() {
        Column() {
          Row() {
            TextArea({
              text: this.content,
              placeholder: 'input markdown content here',
              controller: this.textAreaController
            })
              .width('100%')
              .height('100%')
              .fontColor(Color.Black)
              .backgroundColor(Color.White)
              .onSubmit(() => { this.textAreaController.stopEditing() })
              .onChange(e => { this.content = e })
          }
          .width('100%')
          .layoutWeight(1)
          .padding(10)

          Row() {
            Blank()
            ForEach(this.actions, (item: IAction) => {
              Button(item.title)
                .backgroundColor(0x1890ff)
                .onClick(() => {
                  this.stack.pushPath({ name: item.mode });
                })
              Blank()
            })
          }
          .width('100%')
          .height(60)
        }
      }
      .height('100%')
    }
    .title('Fluid Markdown')
    .backgroundColor(PAGE_BGCOLOR)
    .mode(NavigationMode.Auto)
    .titleMode(NavigationTitleMode.Mini)
    .hideBackButton(true)
    .navDestination(this.Page)
    .menus([{
      value: '',
      icon:'resources/base/media/pl_icon_list_bullet.svg',
      action: () => this.stack.pushPath({ name: EPage.FeatureList }),
    }])
    .onClick(() => this.textAreaController.stopEditing())
  }
}

interface IAction {
  title: string;
  mode: EShowMode;
}